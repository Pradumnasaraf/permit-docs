---
sidebar_position: 3
title: Building Your First ABAC Policy
description: Learn how to build an ABAC policy in Permit.io
---

import TimelineStep from "../../../../src/components/timeline/TimelineStep";
import TimelineWrapper from "../../../../src/components/timeline/TimelineWrapper";

Attribute-Based Access Control (ABAC) allows you to create sophisticated access policies based on attributes of users, resources, and the environment. In this guide, we'll walk you through creating an ABAC policy step by step.

<div className="video-container">
  <iframe
    src="https://www.youtube.com/embed/QCsWlsjEE5A"
    title="YouTube video player"
    frameBorder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowFullScreen
  ></iframe>
</div>
<br />

## Our Example Scenario

Throughout this guide, we'll work with a practical example that demonstrates ABAC's power:

:::info Example Policy
**"Students at Stanford University who study full-time are the only ones that can rent University bicycles after 5pm."**
:::

This policy involves multiple attributes:

- User attributes: `university`, `is-full-time`
- Resource attributes: `time`
- Action: `rent`

Let's build this policy together!

<TimelineWrapper>
<TimelineStep>

### Step 1: Creating User Attributes

User attributes define characteristics of your users that influence their access rights.

1. Navigate to the **Directory** panel
2. Click the **Settings** button
3. In the **User Attributes** side panel, click **Add Attribute**

![User Attribute Creation Window](/img/abac/user-attributes-0.png)

For our bicycle rental example, we need two user attributes:

- `university`: The university the student attends
- `is-full-time`: Whether the student is enrolled full-time

![Defined User Attributes Example](/img/abac/user-attributes-2.png)

Remember to click **Save** after defining your attributes.

</TimelineStep>

<TimelineStep>

### Step 2: Creating Tenant Attributes

Tenant attributes apply to entire organizations or groups within your system.

1. Navigate to the **Users** panel
2. Click the **Tenant Attributes** button
3. Click **Add New Tenant Attribute**

![Tenant Attribute Creation Window](/img/abac/tenant-attributes-0.png)

Example tenant attributes might include:

- `is-paying`: Whether the tenant has an active subscription
- `tier`: Service tier level
- `user-count`: Number of licensed users

![Defined Tenant Attributes Example](/img/abac/tenant-attributes-3.png)

Don't forget to click **Save** your tenant attributes.

</TimelineStep>

<TimelineStep>

### Step 3: Defining User Sets

User sets are groups of users that share common attribute values. Think of them as dynamic groups that automatically include users based on their attributes.

![User Set Window](/img/abac/user-set.png)

For our example, we'll create a user set for "Full-time Stanford Students":

1. Click **Add Condition**
2. Set conditions:
   - `university` = "Stanford"
   - `is-full-time` = true

![User Set Example](/img/abac/user-set-1.png)

:::info Tenant Boundaries in User Sets
Important security considerations:

- Tenant boundaries are **not automatically enforced** for user sets
- To enforce tenant boundaries, either:
  - Add a condition on `user.roles`
  - Use tenant attributes and compare `resource.tenant` in resource sets

:::

</TimelineStep>

<TimelineStep>

### Step 4: Creating Resources

Resources are the objects or services you want to protect. Each resource can have attributes and allowed actions.

1. Navigate to the **Resources** section
2. Click **Create New Resource**

![Resource Window](/img/abac/resource-0.png)

For our bicycle rental system:

1. Create a "bicycle" resource
2. Add the `time` attribute
3. Define two actions:
   - `ride`
   - `rent`

![Resource Adding Attributes Example](/img/abac/resource-1.png)

</TimelineStep>

<TimelineStep>

### Step 5: Defining Resource Sets

Resource sets group resources based on their attributes. In our example, we need to identify "bicycles available after 5pm."

![Resource Set Window](/img/abac/resource-set-0.png)

Create the condition:

- `time` > "17:00"

![Resource Set Example](/img/abac/resource-set-1.png)

### Advanced: Comparing Resource and User Attributes

You can create conditions that compare resource attributes with user attributes using `(ref)` operators:

![User/Resource Condition Example](/img/abac/resource-user-condition.png)

</TimelineStep>

<TimelineStep>

### Step 6: Applying Permissions

The final step is connecting your user sets with resource sets through permissions.

1. Navigate to the **Dashboard**
2. Find your "Full-Time Stanford Student" user set
3. Locate the "bicycles after 5pm" resource set
4. Check the appropriate permission boxes

![Giving Permissions](/img/updated/abac/abac-stanford-1.png)

Don't forget to click **Save** your changes!

![Saving Permissions](/img/updated/abac/abac-stanford-2.png)

</TimelineStep>
</TimelineWrapper>

:::warning Important Note
You cannot use the key `type` for any attribute you create, as it is a reserved keyword.
:::

## Complex Policy Support

The Permit.io UI supports complex policies with multiple condition groups and conditions:

![Many Group Example](/img/abac/conditions/conditions.png)
