---
sidebar_position: 5
title: Embedd Elements
---

Embed UI components in your application that provide fully functional access control and user management.

import ElementTile from "@site/src/components/elements/ElementTile.js";
import ActionContainer from "@site/src/components/elements/ActionContainer.js";
import EmailUpdatesBox from "@site/src/components/elements/EmailUpdatesBox.js";
import HelpSupportTile from "@site/src/components/elements/HelpSupportTile.js";


### Create a new Element
In this example we will create and embed a new User Management Element using FrontendOnly login method.

First, we will go to permit UI to the Elements section and click on `Create Element` right below the 'User Management' Element.

_![add element](/img/elements/user-management/CreateElement.png)_


Then, it will ask you to fill in the details of the new Element.
You will need to fill in the following fields:
- **Name**: The name of the Element.
- **Permission Model**: The permission model of the Element (RBAC / ReBAC).
- **Roles Levels**: The roles levels of the Element.

_![add element](/img/elements/user-management/ElementsFormEdit.png)_

Additionally, you can management the default settings of the Element and change the Iframe general design:
- Change the background and primary colour of any element to match your brand.
- Give the element a title that makes sense to your end user, or hide it fully.
- Decide if you want to display your users Email, Full Name or both on the element.
- Configure Webhooks to receive automatic updates on actions taken by your users.
  For more information about Webhooks, you can read the [Permit Webhooks](https://docs.permit.io/embeddable-uis/element/user-management/#configure-your-webhook) documentation.

_![Iframe design](/img/elements/user-management/IframDesign.png)_

##### Element Preview

On the right side of the screen, you can see the `End User Element Preview` which will show you how the Element will look like in the end user's dashboard.

_![add element](/img/elements/user-management/ElementPreview.png)_

After you will click on `Save` the Element will be created and you will be redirected to the Element's page.
Now, you can click on the 'Get Code' button to get the Element Embed Code.
This Iframe code will be used to embed the Element in your application.

_![Embed](/img/elements/user-management/EmbedCode.png)]_

### Configure JWKS For Your Environment


This doc will show you how to embed Permit Elements using the FrontendOnly login method (without a backend).
To view more information about the other login methods, you can read the [Permit Elements Login Methods](https://docs.permit.io/embeddable-uis/element/user-management/#server-side-login-route) documentation.

First, open your Permit Dashboard and go to the **Settings** page. Then click on **JWKS Config**
on the upper sidebar and configure your JWKS for the environment you want to use.
Paste your JWKS in the text dialog and click **Save**.
_![Configure JWKS](/img/elements/user-management/ConfigureJwks.png)_ Make sure
your Permit user key is the same as the JWT sub. You can see your permit user key in the **Users**
page in the Permit Dashboard. You can see your JWT sub with sites like [jwt.io](https://jwt.io/).
Just paste your JWT token into the text dialog check on the left side of the sub field.

For more information about the JWKS configuration, you can read the [Permit JWKS Configuration](https://docs.permit.io/docs/jwks-configuration) documentation.

### Install Permit-js

Once you have your application ready, you need to install Permits's JS SDK. This gives you access to our prebuilt embeddable Element components.

Run the following command to install the Permit-js SDK in your project:

```bash
npm install @permitio/permit-js
```


### Client side login- using FrontendOnly


The **loginMethod** here should be set to: `LoginMethod: LoginMethod.frontendOnly`
**userJwt** should be set to the current user token.
**tenant** should be set to the tenant you want to get access to, the current user must have role assigned to him in this tenant.
**envId** should be set to the environment id you want to get access to, you need to make sure you have set the JWKS in this env (), you can get your env id with [this api call](https://api.permit.io/v2/redoc#tag/Environments/operation/list_environments).
Or take it from the get code dialog in the Permit Elements Dashboard.
**userKeyClaim** (Optional) - Optional for frontendOnly login method, if your user key in Permit isn't the same as the jwt `sub` claim, you need to pass the key of the claim here.

```javascript
permit.elements.login(
    loginMethod:LoginMethod.frontendOnly
    userJwt: <YOUR_USER_JWT>,
    tenant:<YOUR_TENANT_KEY>,
    envId: <YOUR_ENV_ID>}).then((res: any) => {
    console.log('success', res);
    }).catch((err: any) => {
    // you can handle the error either here or in your BE
     console.log('err', err);
     });",
```


After you run login successfully you will **get a cookie** called `permit_session` which will allow you to
load your Permit Element securely and successfully.

### Client-side logout method

This function should be called along with the logging-out logic that you have within your App, to make sure the user does not
continue to have access to the Permit Element.

This logout method **should be called** as part of the logic of logging your user out with your
authentication solution.

```javascript
permit.elements.logout();
```

### Login Errors

There are a few possible errors you might find yourself come across while working with the embedding of Permit Elements.

| Error                      | Description                                                                                                                                                                                                                                        |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `USER_NOT_FOUND`           | This error can appear if you are trying to log in as a particular user, but that **user does not exist within Permit**. You can also experience this login error when you are trying to login a user into a **tenant that he does not belong to**. |
| `TENANT_NOT_FOUND`         | This error can appear when you are passing in a tenant, either in the frontend `permit.elements.login` function, or in your backend URL endpoint, where the tenant has not been created in Permit.                                                 |
| `INVALID_PERMISSION_LEVEL` | This error will emerge when you are trying to access part of the Element which you have not been given access too. This usually means the role that the person obtained has remained in the **Hidden Roles** permission level.                     |
| `FORBIDDEN_ACCESS`         | This error will emerge when you are trying to login to an Element you have not been given permission to see.                                                                                                                                       |



