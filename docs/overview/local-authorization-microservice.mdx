---
sidebar_position: 4
title: Run Local Authorization Microservice
timeline: true
---

Running a local authorization microservice (PDP) provides significant benefits for your application's performance, security, and reliability. This guide will help you understand and set up local authorization in your application.

import CodeBlock from "../../src/components/code-block/CodeBlock";
import WhatsNext from "../../src/components/whats-next/WhatsNext";
import TimelineStep from "../../src/components/timeline/TimelineStep";
import TimelineWrapper from "../../src/components/timeline/TimelineWrapper";
import Video from "../../src/components/video/Video";

import pullPDP from "/img/updated/walkthroughs/local-policy-check/pulling-pdp.mp4";
import runPDP from "/img/updated/walkthroughs/local-policy-check/running-pdp.mp4";

## Why Run Authorization Locally?

Running authorization locally through a Policy Decision Point (PDP) offers several key advantages:

### 1. Lightning-Fast Performance

- **Zero Network Latency**: All authorization decisions are made locally within your infrastructure
- **High Throughput**: Handle thousands of authorization requests per second
- **Optimized Response Times**: Critical for user-facing applications

### 2. Enhanced Security

- **Data Privacy**: Sensitive data never leaves your infrastructure
- **Compliance**: Easier adherence to data residency requirements
- **Controlled Access**: Full control over your authorization layer

### 3. Improved Reliability

- **Always Available**: Works even if cloud services are down
- **Independent Operation**: No dependency on external services
- **Local Control**: Full control over your authorization infrastructure

### 4. Advanced Policy Support

- **RBAC, ABAC, & ReBAC**: Support for all policy types
- **Complex Rules**: Handle sophisticated authorization scenarios
- **Real-time Updates**: Policy changes are instantly reflected

<TimelineWrapper>
<TimelineStep>

## Setting Up Your Local PDP

Let's walk through setting up your local authorization microservice:

### 1. Pull the Docker Container

First, pull the latest PDP container from Docker Hub:

```bash
docker pull permitio/pdp-v2:latest
```

<Video src={pullPDP} controls />

:::note
If you haven't installed Docker yet, [get it here](https://docs.docker.com/get-started/get-docker/).
:::

</TimelineStep>
<TimelineStep>

### 2. Run the Container

Launch the PDP container with your API key:

```bash
docker run -it -p 7766:7000 \
  --env PDP_DEBUG=True \
  --env PDP_API_KEY=<YOUR_API_KEY> \
  permitio/pdp-v2:latest
```

<Video src={runPDP} controls />

The container will expose the PDP on `localhost:7766`, ready to handle authorization requests.

:::tip
You can verify the container is running with:

```bash
docker ps
```

:::

</TimelineStep>
<TimelineStep>

## Configuring Your Application

### 1. Initialize the SDK

Update your application code to use the local PDP:

<CodeBlock folderPath="/walkthroughs/first-policy-check/local-pdp-obj" />

### 2. Perform Authorization Checks

Your authorization checks remain the same, but now they're processed locally:

```javascript
const permitted = await permit.check("user|123", "read", "document");
```

</TimelineStep>
<TimelineStep>

## Advanced Configuration

### PDP Debug Mode

Enable debug mode for detailed logging:

```bash
docker run -it -p 7766:7000 \
  --env PDP_DEBUG=True \
  --env PDP_API_KEY=<YOUR_API_KEY> \
  --env PDP_OPA_DECISION_LOG_CONSOLE=True \
  permitio/pdp-v2:latest
```

### Custom Port Configuration

Change the default port (7766):

```bash
docker run -it -p 8000:7000 \
  --env PDP_API_KEY=<YOUR_API_KEY> \
  permitio/pdp-v2:latest
```

### Decision Log Settings

Configure decision logging behavior:

```bash
docker run -it -p 7766:7000 \
  --env PDP_API_KEY=<YOUR_API_KEY> \
  --env PDP_OPA_DECISION_LOG_ENABLED=True \
  --env PDP_OPA_DECISION_LOG_MIN_DELAY=1 \
  permitio/pdp-v2:latest
```

</TimelineStep>
</TimelineWrapper>

## Monitoring and Debugging

### Health Checks

Monitor your PDP's health at:

```
http://localhost:7766/health
```

### Metrics

Access PDP metrics at:

```
http://localhost:7766/metrics
```

### API Documentation

View the PDP's API documentation at:

```
http://localhost:7766/redoc
```

## What did you learn?

From this walkthrough, you've learned:

- How to set up and run a local authorization microservice
- Configure your application to use local authorization
- Monitor and debug your authorization layer
- Advanced configuration options for the PDP

:::tip FUN FACT!
A well-configured local PDP can handle thousands of authorization decisions per second with sub-millisecond latency, making it perfect for high-performance applications!
:::

<WhatsNext progress={50} customText="Great job! You're now running local authorization.">
  <h2>What's next? ðŸŽ‰</h2>
  <ul>
    <li>Learn about ABAC policies</li>
    <li>Explore ReBAC for relationship-based authorization</li>
    <li>Set up audit logging for your authorization layer</li>
  </ul>
</WhatsNext>{" "}
